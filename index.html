<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Climb Recorder</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<center>
    <nav class="navMenu">
        <a href="index.html">Accueil</a>
        <a href="index.html#licencies">Licenciés</a>
        <a href="index.html#voies">Voies</a>
        <a href="#">Cours</a>
    </nav>
    <div class="separator"></div>
</center>


<div id="app" class="container">
    <h2 id="licencies">Liste des licenciés du club :</h2>
    <table class="table">
        <thead>
        <tr>
            <th>Identifiant</th>
            <th>Numéro licence FFME</th>
            <th>Nom</th>
            <th>Prénom</th>
            <th>Initiateur</th>
        </tr>
        </thead>
        <tbody>
        <tr v-for="personne in personnes" :key="personne.idPersonne" v-on:click="selectPersonne(personne)">
            <td>{{ personne.idPersonne }}</td>
            <td v-if="personne.numLicence==null"><img src="noLicence.png" alt="personne.numLicence"></td>
            <td v-else>{{personne.numLicence}}</td>
            <td>{{ personne.nom }}</td>
            <td>{{ personne.prenom }}</td>
            <td><img v-bind:src="getInitiateurIcon(personne.estInitiateur)" alt="Initiateur"></td>
        </tr>
        </tbody>
    </table>
    <br>


    <h2 id="voies">Liste des voies du club :</h2>
    <button id="afficherFormulaire">Afficher le formulaire</button>
    <!-- Formulaire masqué par défaut -->
    <div id="formulaireContainer" style="display: none;">
        <span id="fermerFormulaire">&times;</span>
        <form id="formVoie">
            <!-- Contenu du formulaire -->
            <label for="secteur">Secteur :</label>
            <input type="number" id="secteur" name="secteur">
            <br>

            <label for="couleur">Couleur :</label>
            <input type="text" id="couleur" name="couleur">
            <br>

            <label for="difficulte">Difficulté :</label>
            <select id="difficulte" name="difficulte">
                <option value="4a">4a</option>
                <option value="4b">4b</option>
                <option value="4c">4c</option>
                <option value="5a">5a</option>
                <option value="5b">5b</option>
                <option value="5c">5c</option>
                <option value="6a">6a</option>
                <option value="6b">6b</option>
                <option value="6c">6c</option>
                <option value="7a">7a</option>
                <option value="7b">7b</option>
                <option value="7c">7c & +</option>
            </select>
            <br>

            <label for="personnes">Ouvreur :</label>
            <select id="personnes" name="personnes">
                <!-- Les options seront ajoutées dynamiquement avec JavaScript -->
            </select>
            <br>

            <!-- Autres champs du formulaire -->
            <button type="submit">Envoyer</button>
        </form>
    </div>

    <table class="table">
        <thead>
        <tr>
            <th>Identifiant</th>
            <th>Secteur</th>
            <th>Couleur</th>
            <th>Niveau</th>
            <th>Ouvreur</th>
        </tr>
        </thead>
        <tbody>
        <tr v-for="voie in voies" :key="voie.idVoie" v-on:click="selectVoie(voie)">
            <td>{{ voie.idVoie }}</td>
            <td>{{voie.secteur}}</td>
            <td>{{ voie.couleur }}</td>
            <td v-if="parseInt(voie.niveau.charAt(0))>6">{{ voie.niveau }}<span class="point" style="color: red; font-size: 60px">&#8226;</span></td>
            <td v-if="[5,6].includes(parseInt(voie.niveau.charAt(0)))">{{ voie.niveau }}<span class="point" style="color: orange; font-size: 60px">&#8226;</span></td>
            <td v-if="parseInt(voie.niveau.charAt(0))<5">{{ voie.niveau }}<span class="point" style="color: limegreen; font-size: 60px">&#8226;</span></td>
            <td>{{voie.prenom}}  {{voie.nom}}</td>
        </tr>
        </tbody>
    </table>
</div>
<script src="script.js"></script>
<script>
    // Récupérer l'élément de la croix de fermeture
    var fermerFormulaireBtn = document.getElementById('fermerFormulaire');

    // Ajouter un gestionnaire d'événements au clic sur la croix de fermeture
    fermerFormulaireBtn.addEventListener('click', function() {
        // Masquer le formulaire
        formulaireContainer.style.display = 'none';
    });

    // ... (le reste du code JavaScript pour afficher le formulaire reste inchangé)


    // Récupérer les éléments du DOM
    var afficherFormulaireBtn = document.getElementById('afficherFormulaire');
    var formulaireContainer = document.getElementById('formulaireContainer');

    // Ajouter un gestionnaire d'événements au clic sur le bouton
    afficherFormulaireBtn.addEventListener('click', function() {
        // Afficher le formulaire en changeant le style du conteneur
        formulaireContainer.style.display = 'block';
    });

    // Ajouter un gestionnaire d'événements pour masquer le formulaire lors de son envoi
    var monFormulaire = document.getElementById('monFormulaire');
    monFormulaire.addEventListener('submit', function(event) {
        // Empêcher le comportement par défaut du formulaire (rechargement de la page)
        event.preventDefault();

        // Masquer le formulaire après l'envoi
        formulaireContainer.style.display = 'none';

        // Ajouter ici le code pour traiter les données du formulaire si nécessaire
    });

</script>
</body>
</html>
